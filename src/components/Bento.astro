---
type Tech = { name: string; logo: string };

const works: {
  title: string;
  desc: string;
  href: string;
  img: string;
  alt: string;
  classes: string;
  techs: Tech[];
  github?: string;
}[] = [
  {
    title: "Tic Tac Toe Online",
    desc: "A real-time multiplayer Tic Tac Toe game where players can join rooms and compete online. The frontend is built with Angular and styled with TailwindCSS, while the backend uses NestJS and an SQL database for data management. Real-time gameplay is powered by WebSockets. The project includes continuous integration pipelines with GitHub Actions for automated deployment and quality assurance. Available in both English and Spanish.",
    href: "https://tictactoe-theta-ten.vercel.app",
    img: "works/tictactoe.png",
    alt: "Tic Tac Toe Online",
    classes: "item row-2 column-3 glightbox",
    techs: [
      { name: "Angular", logo: "/logos/angular.svg" },
      { name: "TailwindCSS", logo: "/logos/tailwind.svg" },
      { name: "Vercel", logo: "/logos/vercel.svg" }
    ],
    github: "https://github.com/pabloconejos/tic_tac_toe"
  },
  {
    title: "2024 MUSIC",
    desc: "A web form created with Angular and TailwindCSS to collect and share users’ favorite music of 2024. Hosted on Vercel, this project emphasizes a clean UI/UX and seamless user interaction.",
    href: "https://2024best.vercel.app",
    img: "works/2024best.png",
    alt: "2024 music form",
    classes: "item column-2 glightbox",
    techs: [
      { name: "Angular", logo: "/logos/angular.svg" },
      { name: "TailwindCSS", logo: "/logos/tailwind.svg" },
      { name: "Vercel", logo: "/logos/vercel.svg" }
    ],
    github: "https://github.com/tuusuario/2024music"
  },
  {
    title: "MUSIC NUMBERS",
    desc: "A Spotify statistics dashboard that provides personalized insights with charts and tracking features. Built with Angular and styled with TailwindCSS, the project integrates Spotify APIs to fetch listening history and display trends. Deployed on Firebase and Vercel for scalability.",
    href: "https://musicnumbers-f4704.web.app/",
    img: "works/musicnumbers.jpg",
    alt: "Spotify Stats",
    classes: "item column-3 glightbox",
    techs: [
      { name: "Angular", logo: "/logos/angular.svg" },
      { name: "TailwindCSS", logo: "/logos/tailwind.svg" },
      { name: "Vercel", logo: "/logos/vercel.svg" }
    ],
    github: "https://github.com/tuusuario/musicnumbers"
  },
  {
    title: "MY LINKS",
    desc: "A personal link-sharing web app where users can build their own profile pages with customizable links to social media, websites, or other resources. Developed with Angular and TailwindCSS for a modern look, and hosted on Vercel for fast global delivery.",
    href: "https://mylinks-sigma.vercel.app/",
    img: "works/mylinks.png",
    alt: "Links Social Media",
    classes: "item column-3 glightbox",
    techs: [
      { name: "Angular", logo: "/logos/angular.svg" },
      { name: "TailwindCSS", logo: "/logos/tailwind.svg" },
      { name: "Vercel", logo: "/logos/vercel.svg" }
    ],
    github: "https://github.com/pabloconejos/mylinks"
  },
  {
    title: "Online Magazine",
    desc: "A digital magazine showcasing the creative process of a full photography session. Built with Astro for static site generation, styled with TailwindCSS, and deployed on Vercel. The project highlights Astro’s performance advantages for storytelling and content-driven websites.",
    href: "https://opium-session.web.app/",
    img: "works/gallerymagazine.png",
    alt: "Online Magazine",
    classes: "item column-2 glightbox",
    techs: [
      { name: "Astro", logo: "/logos/astro.svg" },
      { name: "TailwindCSS", logo: "/logos/tailwind.svg" },
      { name: "Vercel", logo: "/logos/vercel.svg" }
    ],
    github: "https://github.com/pabloconejos/gallery_opium_sesion"
  },
  {
    title: "Escriba Designs Portfolio",
    desc: "A portfolio website for a graphic designer featuring both a public gallery and a back-office dashboard. The backend is powered by NestJS with an API to manage content, while the frontend uses Angular with TailwindCSS for responsive design. Deployed on Vercel for easy client access and management.",
    href: "https://escribadesigns-d7b17.web.app/galeria",
    img: "works/escriba.png",
    alt: "Graphic Designer Portfolio",
    classes: "item column-3 glightbox",
    techs: [
      { name: "Angular", logo: "/logos/angular.svg" },
      { name: "TailwindCSS", logo: "/logos/tailwind.svg" },
      { name: "Vercel", logo: "/logos/vercel.svg" }
    ],
    github: "https://github.com/pabloconejos/escribaDesigns2"
  }
];
---

<div id="works" class="contenedor">
  <h1 class="title">SIDE WORKS</h1>
  <div class="grid">
    {works.map((work) => (
      <div class={work.classes}>
        <a
          class="hover:blur-sm transition duration-300"
          target="_blank"
          href={work.href}
          rel="noopener noreferrer"
        >
          <img src={work.img} alt={work.alt} />
        </a>

        <div class="overlay">
          <div class="ov-title">
            <span>{work.title}</span>
            <p>{work.desc}</p>
          </div>

          {/* <div class="ov-desc">
            <p>{work.desc}</p>
          </div> */}

          <!-- Abajo: techs izq + GitHub dcha -->
          <div class="ov-bottom">
            <ul class="techs">
              {work.techs.map((t) => (
                <li class="badge" title={t.name}>
                  <img src={t.logo} alt={t.name} loading="lazy" />
                  <span>{t.name}</span>
                </li>
              ))}
            </ul>

            {work.github && (
              <a
                class="github-icon"
                href={work.github}
                target="_blank"
                rel="noopener noreferrer"
                aria-label={`Ver ${work.title} en GitHub`}
                title="Ver en GitHub"
              >
                <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                  <path fill="currentColor"
                    d="M12 .5a11.5 11.5 0 0 0-3.64 22.41c.58.11.79-.25.79-.56v-2.02c-3.2.7-3.88-1.38-3.88-1.38-.53-1.34-1.3-1.7-1.3-1.7-1.06-.72.08-.71.08-.71 1.17.08 1.79 1.2 1.79 1.2 1.04 1.78 2.73 1.27 3.4.97.11-.76.41-1.27.75-1.56-2.55-.29-5.23-1.27-5.23-5.65 0-1.25.45-2.26 1.2-3.06-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.17a11.03 11.03 0 0 1 5.8 0c2.2-1.48 3.18-1.17 3.18-1.17.63 1.59.23 2.76.11 3.05.75.8 1.2 1.81 1.2 3.06 0 4.39-2.69 5.35-5.25 5.64.42.36.8 1.07.8 2.16v3.2c0 .31.21.68.8.56A11.5 11.5 0 0 0 12 .5z"/>
                </svg>
              </a>
            )}
          </div>
        </div>
      </div>
    ))}
  </div>
</div>

<style>
  .title { font-family: 'Anton'; }
  h1 { font-size: clamp(24px, 5vw, 50px); }
  .contenedor { margin: 15px; }

  .grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    grid-auto-rows: 350px;
    gap: 1rem;
    grid-auto-flow: dense;
  }

  .item {
    border-radius: 0.45rem;
    background-color: #f5f5f5;
    overflow: hidden;
    position: relative;
  }

  .item img {
    width: 100%; height: 100%; object-fit: cover;
    transform: scale(1); transition: 0.4s ease-in-out;
  }

  /* Overlay: ocupa todo, con cuadrícula para colocar cada zona */
  .overlay {
    position: absolute; 
    inset: 0; 
    width: 100%; 
    height: 100%;
    display: grid;
    grid-template-rows: auto 1fr auto;
    grid-template-columns: 1fr;
    color: #fff;
    padding: 14px;
    gap: 8px;
    background: linear-gradient(
      to bottom,
      rgba(0,0,0,.15) 0%,
      rgba(0,0,0,.35) 40%,
      rgba(0,0,0,.55) 70%,
      rgba(0,0,0,.65) 100%
    );
    opacity: 0; transition: opacity .3s ease;
    pointer-events: none; /* permite click al <a> de la imagen por debajo */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .item:hover .overlay { opacity: 1; }
  .item:hover img { transform: scale(1.04); }

  .ov-title { display:flex; flex-direction: column; align-items: start; justify-content:space-between; }
  .ov-title span { font-weight: 700; font-size: clamp(14px, 2vw, 20px); text-shadow: 0 2px 10px rgba(0,0,0,.5); }

  .ov-desc { display:flex; align-items:center; }
  .ov-desc p {
    margin: 0;
    font-size: clamp(12px, 1.6vw, 16px);
    line-height: 1.35;
    opacity: .95;
  }

  /* Fila inferior: techs a la izquierda, GitHub a la derecha */
  .ov-bottom {
    display:flex; align-items:center; justify-content:space-between; gap: .75rem;
  }

  /* Tech badges */
  .techs { display:flex; flex-wrap:wrap; gap:.4rem; margin:0; padding:0; list-style:none; }
  .badge {
    display:inline-flex; align-items:center; gap:.35rem;
    padding:.25rem .5rem; border-radius:999px;
    background: rgba(255,255,255,.14);
    backdrop-filter: blur(2px) saturate(140%);
    font-size:.8rem; line-height:1;
  }
  .badge img { 
    display:block;
    width:16px; height:16px; object-fit:contain;
  }

  /* Icono GitHub (clicable incluso con overlay usando pointer-events) */
  .github-icon {
    pointer-events:auto; /* re-habilita eventos solo en el icono */
    display:inline-flex; align-items:center; justify-content:center;
    width: 38px; height: 38px; border-radius: 9999px;
    background: rgba(255,255,255,.14); color: #fff;
    transition: transform .15s ease, background .2s ease;
  }
  .github-icon:hover { transform: translateY(-1px); background: rgba(255,255,255,.22); }

  /* Responsive Grid */
  @media (max-width: 1024px) {
    .grid { grid-template-columns: repeat(4, 1fr); }
  }
  @media (max-width: 768px) {
    .grid { grid-template-columns: repeat(2, 1fr); }
    .ov-desc p { font-size: 0.9rem; }
  }
  @media (max-width: 480px) {
    .grid { display:flex; flex-direction:column; gap: 8px; }
  }

  /* Columns */
  .column-1 { grid-column: span 1; } .column-2 { grid-column: span 2; }
  .column-3 { grid-column: span 3; } .column-4 { grid-column: span 4; }
  .column-5 { grid-column: span 5; } .column-6 { grid-column: span 6; }
  .column-7 { grid-column: span 7; } .column-8 { grid-column: span 8; }

  /* Rows */
  .row-1 { grid-row: span 1; } .row-2 { grid-row: span 2; }
  .row-3 { grid-row: span 3; } .row-4 { grid-row: span 4; }
  .row-5 { grid-row: span 5; } .row-6 { grid-row: span 6; }
  .row-7 { grid-row: span 7; } .row-8 { grid-row: span 8; }


  @media screen and (max-width: 480px) {
    .overlay {
      display: none;
    }
  }
</style>
